{
  "metadata": {
    "version": "2.0",
    "description": "Enhanced rules for classifying user intent for Elasticsearch queries",
    "last_updated": "2025-09-24"
  },
  "classification_config": {
    "confidence_threshold": 0.8,
    "rules": {
      "schema_only": {
        "description": "User wants only Elasticsearch schema/mapping information",
        "required_keywords": [
          "schema", "mapping", "fields", "structure", "field types"
        ],
        "must_contain_one_of": [
          "schema", "mapping", "fields available", "field types", "index structure"
        ],
        "must_not_contain": [
          "transactions", "payments", "data with", "recent", "status 2", "amount", "between"
        ],
        "strict_match": true,
        "examples": [
          "show me elasticsearch schema",
          "what fields are available", 
          "give me field mapping",
          "elasticsearch structure"
        ]
      },
      "host_only": {
        "description": "User wants only host selection/recommendation",
        "required_keywords": [
          "host", "server", "which host", "best host", "optimal host"
        ],
        "must_contain_one_of": [
          "host", "server", "which host", "best host", "optimal host", "recommend host"
        ],
        "must_not_contain": [
          "transactions", "payments", "show me transactions", "recent", "data with"
        ],
        "strict_match": true,
        "examples": [
          "best host for September data",
          "which host should I use",
          "optimal server for this query",
          "recommend host for date range"
        ]
      },
      "complex_search": {
        "description": "User wants to search for actual data with any criteria or filters",
        "positive_keywords": [
          "transaction", "transactions", "payment", "payments", "search", "find", 
          "get", "show", "show me", "retrieve", "recent", "latest", "data",
          "between", "where", "status", "amount", "results", "query",
          "filter", "condition", "criteria", "with", "having", "need",
          "display", "list", "give me", "fetch", "pull", "return"
        ],
        "data_request_indicators": [
          "show me", "get me", "find", "search", "retrieve", "fetch",
          "display", "list", "give me", "pull", "return", "need"
        ],
        "filter_indicators": [
          "with", "having", "where", "status", "between", "recent", 
          "latest", "above", "below", "greater", "less", "equal", "="
        ],
        "priority": "high",
        "default_for_data_requests": true,
        "examples": [
          "show me recent transactions with status 2",
          "find payments between 1st Sept to 5th Sept",
          "get transactions where status is completed",
          "show me failed transactions",
          "recent payments",
          "transactions with amount above 1000",
          "display all payments",
          "list recent data"
        ]
      }
    }
  },
  "llm_prompt_template": {
    "description": "Enhanced template for LLM intent analysis prompt",
    "template": "You are an expert intent classifier for Elasticsearch queries.\\n\\nUSER REQUEST: \\\"{userPrompt}\\\"\\n\\nCLASSIFICATION RULES:\\n{rules}\\n\\nüî• CRITICAL: ANALYZE THE USER'S ACTUAL INTENT üî•\\n\\n‚ùå WRONG CLASSIFICATION EXAMPLES:\\n- \\\"Show me recent transactions with status 2\\\" ‚Üí SCHEMA_ONLY (WRONG!)\\n- \\\"Find payments\\\" ‚Üí SCHEMA_ONLY (WRONG!)\\n\\n‚úÖ CORRECT CLASSIFICATION:\\n- \\\"Show me recent transactions with status 2\\\" ‚Üí COMPLEX_SEARCH (wants actual transaction data)\\n- \\\"Find payments\\\" ‚Üí COMPLEX_SEARCH (wants actual payment data)\\n- \\\"Recent data with status\\\" ‚Üí COMPLEX_SEARCH (wants actual data)\\n\\nüéØ DECISION LOGIC:\\n\\n1Ô∏è‚É£ Does user want ACTUAL DATA/TRANSACTIONS/PAYMENTS?\\n   ‚Üí YES = COMPLEX_SEARCH\\n   ‚Üí Keywords: transactions, payments, data, recent, show me [data], status 2\\n\\n2Ô∏è‚É£ Does user want ONLY SCHEMA/MAPPING info?\\n   ‚Üí Only if explicitly asking for schema structure\\n   ‚Üí Keywords: \\\"show me schema\\\", \\\"what fields available\\\", \\\"mapping\\\"\\n\\n3Ô∏è‚É£ Does user want ONLY HOST recommendation?\\n   ‚Üí Only if explicitly asking for server/host\\n   ‚Üí Keywords: \\\"best host\\\", \\\"which server\\\"\\n\\nüî• FOR THE PROMPT \\\"Show me recent transactions with status 2\\\":\\n- User wants: ACTUAL TRANSACTION DATA\\n- Has filter: status 2\\n- Intent: COMPLEX_SEARCH\\n- Confidence: 0.98\\n\\nRESPONSE FORMAT (JSON only):\\n{\\n  \\\"intent\\\": \\\"COMPLEX_SEARCH\\\",\\n  \\\"confidence\\\": 0.98,\\n  \\\"reasoning\\\": \\\"User wants actual transaction data with status filter\\\"\\n}"
  }
}